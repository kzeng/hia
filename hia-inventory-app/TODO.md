# UI
## 图书盘点


## 照片管理


## 系统设置
- *ftp 配置下方新增一个测试连接的按钮。
- 系统信息 
  CPU：
  RAM:
  Disk: used/total
  操作系统：



# Featues
## 图书盘点
- *拍照成功后，以Snackbar方式给一个简短的提示。例如“照片已保存”或“拍照成功” ；持续时间：使用 SnackbarDuration.Short（约 3 秒）



## 照片管理




## 照片管理
- *照片管理页面左侧栏的文件夹列表，可以通过读取DCIM 目录下的date文件夹（yyymmdd）获取
- *点击左侧栏的文件夹列表中文件夹，遍历其下所有图片并在右侧Grid 区域显示，当图片很多时，Grid 区域下方需要有分页导航栏。
- *点击Grid 区域的单张图片，Full-screen Dialog 方式显示大图，再次点击返回。
定义实现可能性：完全支持通过组合其他组件或手势检测器实现上述功能，确保符合 M3 视觉风格（动态颜色、动画、elevation 等）。
上一张/下一张（滑动导航）：在 Dialog 内集成 HorizontalPager（Jetpack Compose Pager 库）或 ViewPager2（传统 Views），实现左右滑动切换图片。
手势捏合缩放：使用 Compose 的 graphicsLayer + detectTransformGestures（检测缩放、平移、旋转），或第三方库（如 PhotoView）结合 M3 主题。支持双击放大、边界限制等。
重叠显示文字详情：在图片上方/下方叠加 Text 或 Column（使用 Box 布局），实现半透明 overlay（如图片描述、日期）。可添加淡入/淡出动画，或点击图片切换显示/隐藏。

文字详细信息，如文件名，拍摄时间， 拍摄位置等信息。 拍摄位置信息，如楼层、区域、架号、正反面号、列号、点位号 可根据文件名的命名规则推导出来。
楼层：   文件名1-2位
区域：   文件名3-4位
架号：   文件名5-6位
正反面号 文件名7-8位
列号：   文件名9-10位
点位号： 文件名11位

时间戳： 文件名13-22位 单位：秒； 需要转成YYYY-MM-DD HH:mm:ss


- *长按左侧栏的文件夹列表中文件夹，选择删除该文件夹，实现删除该文件夹功能（提示用户确认）


机器人打点的MarkID规则：01 02 03 01 04 01楼层---区域---架号---正反面号---列号---点位号

- *长按左侧栏的文件夹列表中文件夹，选择上传该文件夹需要以下处理逻辑实现
  1. 扫描DCIM 目录是否存在pic文件夹，如果存在，删除。
  2. 将图片重命名并拷贝到路径 DCIM\pic\01（默认固定）+ {照片文件名前10位} + 01（默认固定摄像头ID）\ book \ {时间戳: 照片文件名13至22位} \  {照片文件名第11位}.{扩展名不变}
  3. 将pic 目录上传到ftp server。 ftp 连接配置，如：主机，端口，账号，密码 从app 系统系统配置中取。
  4. 显示上传进度，上传结束，给出简要反馈信息。
  5. 支持ftp 续传功能（重复上传时，增量上传不要全量上传）

--------------------

图书盘点页面左栏 新增一个参数：架层 ：如：03  两位数字，范围：(01-99) 放在‘点位号’后面配置
拍照图片的命名规则(新的)： 如 0102030104103-1751422638.png, 其中‘-’ 前半部分0102030104103表示  楼层、区域、架号、正反面号、列号、点位号、架层； ‘-’ 后半部分1751422638表示时间戳。

所以 文件命名预览 这里也需要相应修改， 点位号后面多了两位数字(架层)， 如： 0102030104103-<timestamp>.png

照片保存路径名也需要相应修改：
pic//01（默认固定）+ {照片文件名前10位} + {照片文件名12-13位} // book // {时间戳: 照片文件名15至24位} //   {照片文件名第11位}.png
相当于’默认固定摄像头ID 01‘ 位置 被 ’架层‘ 取代。 时间戳往后偏移2位。

图片大图上的详情问题也可能需要修改，增加 ’架层‘， 时间戳往后偏移2位再解析。



## 系统设置
- *对ftp 配置数据进行保存，建议使用Preferences DataStore方式数据持续化。 ftp 数据保存前需交验合法性。
- *测试连接的按钮功能 测试ftp配置的连通性。



# Optimize
测试发现拍照的速度有点慢，从点击拍照到弹出’照片已保存‘消息，大约需要2-3秒， 这里可能包含自动对焦和写文件的过程总时间。 
拍照逻辑这一块是否存在优化的可能？

拍照速度优化：
可以明显提速，关键是避免“YUV→Bitmap→PNG”的双重编码，并让 CameraX 直接把照片写进 MediaStore（JPEG）。另外启用最小延迟模式、适当降低分辨率也会加速对焦/曝光等待与写盘。

建议改动（主打速度的方案）

用 ImageCapture.CAPTURE_MODE_MINIMIZE_LATENCY。
通过 OutputFileOptions 直接保存 JPEG 到 MediaStore（无需手动转 Bitmap/PNG）。
可选：设定 4:3 目标比例，jpegQuality≈85，进一步提升速度/体积平衡。

说明

现在不再走 imageProxyToBitmap 与 saveBitmapToDcimDateFolder，CPU/IO 大幅减少，通常可把总时延压到 1 秒内（视设备而定）。
最小延迟模式会减少等待 AF/AE 完全收敛的时间，拍摄响应更快；如需更稳的曝光/对焦，可改回 MAXIMIZE_QUALITY。
若必须严格使用 .png 后缀，请确认是否允许改为 .jpg；PNG 是无损压缩，编码很慢。若必须 PNG，建议：降低目标分辨率（例如 setTargetResolution 1280×960），或拍完后台异步转 PNG，但拍摄当下仍会慢。
需要我同步把 Photos/命名解析/上传逻辑兼容 .jpg 吗？如果必须保留 .png 后缀，请确认，我再给出保留 .png 的优化版（以降分辨率为主）。


# ISSUES
